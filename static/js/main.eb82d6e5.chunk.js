(this.webpackJsonpstar=this.webpackJsonpstar||[]).push([[0],{52:function(t,e,a){},53:function(t,e,a){},55:function(t,e,a){},84:function(t,e,a){},86:function(t,e,a){},87:function(t,e,a){"use strict";a.r(e);var n=a(2),s=a(0),o=a.n(s),c=a(14),r=a.n(c),l=(a(52),a(53),a(54),a(15)),i=a(7),d=a(23),h=a(18),u=a(19),j=a(21),m=a(20),p=a(90),b=a(8),g=(a(55),a(16)),x=a.n(g),f=a.p+"static/media/letterPlanet.131dbf00.gif",O=function(t){Object(j.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).handleSubmit=function(t){null===n.state.noteTitle||null===n.state.noteContent||null===n.state.noteContent?alert("\u4f60\u6709\u5730\u65b9\u6ca1\u6709\u5199\u5b8c\u54e6\uff5e"):n.handleMoveFoward()},n.handleMoveFoward=function(){x.a.post("https://tochenbackend.herokuapp.com/posts/add",{title:n.state.noteTitle,description:n.state.noteContent,user:n.state.receiver}).then((function(t){console.log(t)})).catch((function(t){console.log("There's an error")})),setTimeout((function(){n.setState({redirect:!0})}),1e3)},n.handleInputChange=function(t){n.setState(Object(d.a)({},t.target.name,t.target.value))},n.state={noteTitle:null,noteContent:null,receiver:null,redirect:!1},n}return Object(u.a)(a,[{key:"render",value:function(){return this.state.redirect?Object(n.jsx)(i.a,{to:{pathname:"/star/home"}}):Object(n.jsx)("div",{className:"noteBackground",children:Object(n.jsx)(p.a,{style:{width:"50rem",padding:"50px 50px 10px 50px"},children:Object(n.jsxs)(b.a,{onSubmit:this.handleSubmit,children:[Object(n.jsxs)(b.a.Group,{style:{textAlign:"left"},children:[Object(n.jsx)(b.a.Label,{children:"\u6807\u9898"}),Object(n.jsx)(b.a.Control,{required:!0,type:"text",onChange:this.handleInputChange,name:"noteTitle"})]}),Object(n.jsxs)(b.a.Group,{style:{textAlign:"left"},children:[Object(n.jsx)(b.a.Label,{children:"\u6536\u4fe1\u4eba"}),Object(n.jsx)(b.a.Control,{required:!0,type:"text",onChange:this.handleInputChange,name:"receiver"})]}),Object(n.jsxs)(b.a.Group,{controlId:"exampleForm.ControlTextarea1",style:{textAlign:"left"},children:[Object(n.jsx)(b.a.Label,{children:"\u5185\u5bb9"}),Object(n.jsx)(b.a.Control,{required:!0,as:"textarea",rows:17,onChange:this.handleInputChange,name:"noteContent"})]}),Object(n.jsx)("img",{src:f,type:"submit",alt:"planet",onClick:this.handleSubmit,className:"planet"})]})})})}}]),a}(s.Component),S=a(89),w=a.p+"static/media/picture.e7ce2590.png",C=a.p+"static/media/letter.4213584d.gif",v=a.p+"static/media/dreamMachine.6b8d0ff1.PNG",k=a.p+"static/media/magicBtn.0352d25a.gif",y=a.p+"static/media/SignInBtn.77c87640.gif",N=a.p+"static/media/notes.fcea5df7.PNG",I=a(17),B=(a(84),a(33)),P=a.n(B),M=function(t){Object(j.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).buttonClicked=function(){var t=localStorage.getItem("moment");if(P()().diff(t,"minute")>=0||null===t){var e=P()().format("llll");n.setState({moment:e}),!0===n.state.image&&!1===n.state.showPopBtn?(n.setState({imageSrc:k,image:!1}),n.setState((function(){setTimeout((function(){n.setState({showPopBtn:!0})}),5700)}))):!0===n.state.showPopBtn&&n.setState({imageSrc:k,image:!1})}else alert("\u8fd8\u6ca1\u6709\u5230\u53ef\u4ee5\u770b\u7684\u65f6\u95f4\u54e6")},n.handleModal=function(){n.setState({modalShow:!n.state.modalShow}),x.a.get("https://tochenbackend.herokuapp.com/posts/"+n.state.user).then((function(t){if(t.data.length>0){n.setState({posts:t.data});var e=n.state.posts,a=e[Math.floor(Math.random()*Math.floor(e.length))];n.setState({postShown:a})}else{n.setState({postShown:{title:"\u5df2\u7ecf\u770b\u5b8c\u5566",description:"\u4ee5\u540e\u518d\u4e00\u8d77\u521b\u9020\u65b0\u7684\u6545\u4e8b\u5427"}})}})).catch((function(t){console.log("There's an error")}))},n.closeModal=function(){n.setState({modalShow:!n.state.modalShow,showPopBtn:!1,imageSrc:v,image:!0}),"\u5df2\u7ecf\u770b\u5b8c\u5566"!==n.state.postShown.title&&n.deletePost(n.state.postShown._id)},n.state={image:!0,imageSrc:v,showPopBtn:!1,modalShow:!1,posts:[],postShown:{},user:"",moment:""},n}return Object(u.a)(a,[{key:"deletePost",value:function(t){console.log("here for delete"),x.a.delete("https://tochenbackend.herokuapp.com/posts/"+t).then((function(t){return console.log(t.data)}))}},{key:"componentDidMount",value:function(){var t=window.$userName;console.log(t),this.setState({user:t})}},{key:"render",value:function(){var t=this.state.showPopBtn;return Object(n.jsxs)(I.Grid,{fluid:!0,className:"homeBody",children:[Object(n.jsxs)(I.Row,{children:[Object(n.jsxs)(I.Col,{xs:1,className:"firstCol",children:[Object(n.jsx)(l.b,{to:{pathname:"/star/CreateNote"},children:Object(n.jsx)("img",{src:C,alt:"letter",className:"letter"})}),Object(n.jsx)(l.b,{to:{pathname:"/star"},children:Object(n.jsx)("img",{src:y,alt:"button",className:"plane"})})]}),Object(n.jsx)(I.Col,{xs:5,children:Object(n.jsx)("img",{src:w,alt:"Logo",className:"midImage"})}),Object(n.jsx)(I.Col,{xs:1,children:t&&Object(n.jsx)("img",{src:N,alt:"letter",className:"note",onClick:this.handleModal})}),Object(n.jsx)(I.Col,{xs:1,children:Object(n.jsx)("img",{id:"app",src:this.state.imageSrc,alt:"Logo",className:"dreamMachine",onClick:this.buttonClicked})})]}),Object(n.jsxs)(S.a,{show:this.state.modalShow,onHide:this.closeModal,backdrop:"static",keyboard:!1,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,className:"my-modal",children:[Object(n.jsx)(S.a.Header,{closeButton:!0,children:Object(n.jsx)(S.a.Title,{children:this.state.postShown.title})}),Object(n.jsx)(S.a.Body,{children:Object(n.jsx)("text",{children:this.state.postShown.description})})]})]})}}]),a}(s.Component);a(86);window.user="";var T=function(t){Object(j.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).handleSubmit=function(t){t.preventDefault(),x.a.get("https://tochenbackend.herokuapp.com/user").then((function(t){for(var e=0,a=0;a<t.data.length;a++)n.state.user===t.data[a].username&&(n.state.password===t.data[a].password?(n.setState({redirect:!0}),window.$userName=n.state.user,console.log(window.$userName)):alert("\u5bc6\u7801\u4e0d\u5bf9\u54e6"),e=1);0===e&&alert("\u7528\u6237\u4e0d\u5b58\u5728\u54e6\uff01")})).catch((function(t){console.log("There's an error")}))},n.handleInputChange=function(t){n.setState(Object(d.a)({},t.target.name,t.target.value))},n.state={user:null,password:null,userInformation:[],redirect:!1},n}return Object(u.a)(a,[{key:"render",value:function(){return this.state.redirect?Object(n.jsx)(i.a,{to:{pathname:"/star/Home"}}):Object(n.jsx)("div",{className:"background",children:Object(n.jsxs)(p.a,{style:{width:"30rem",padding:"30px"},children:[Object(n.jsx)("h2",{className:"logIn",children:"\u767b\u9646"}),Object(n.jsxs)(b.a,{children:[Object(n.jsxs)(b.a.Group,{style:{textAlign:"left"},children:[Object(n.jsx)(b.a.Label,{children:"\u7528\u6237\u540d"}),Object(n.jsx)(b.a.Control,{type:"text",name:"user",onChange:this.handleInputChange})]}),Object(n.jsxs)(b.a.Group,{controlId:"formBasicPassword",style:{textAlign:"left"},children:[Object(n.jsx)(b.a.Label,{children:"\u5bc6\u7801"}),Object(n.jsx)(b.a.Control,{type:"password",name:"password",onChange:this.handleInputChange})]}),Object(n.jsx)("img",{src:y,alt:"plane",className:"SignInBtn",onClick:this.handleSubmit,width:"100px"})]})]})})}}]),a}(s.Component);var L=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(l.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)(i.b,{path:"/star",exact:!0,component:T}),Object(n.jsx)(i.b,{path:"/star/Home",component:M}),Object(n.jsx)(i.b,{path:"/star/CreateNote",component:O})]})})})},G=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,91)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,o=e.getLCP,c=e.getTTFB;a(t),n(t),s(t),o(t),c(t)}))};r.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(L,{})}),document.getElementById("root")),G()}},[[87,1,2]]]);
//# sourceMappingURL=main.eb82d6e5.chunk.js.map